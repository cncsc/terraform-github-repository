<a href="https://cncsc.io">
  <img src="https://raw.githubusercontent.com/cncsc/.meta/main/img/cncsc-logo-mid.svg" alt="Cloud-Native Cybersecurity Collective Logo" align="right">
</a>

# terraform-github-repository

[![Continuous Integration Status][ci_badge_image]][ci_badge_link]
[![Continuous Deployment Status][cd_badge_image]][cd_badge_link]
[![Release][release_badge_image]][release_badge_link]
[![License][license_badge_image]][license_badge_link]
[![Maintained by Armor][maintainer_badge_image]][maintainer_badge_link]

This repository contains modules for deploying and managing GitHub repositories.

## Requirements

| Name                                                                      | Version    |
|---------------------------------------------------------------------------|------------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 0.12.26 |
| <a name="requirement_github"></a> [github](#requirement\_github)          | >= 5.12.0  |

## Providers

| Name                                                       | Version   |
|------------------------------------------------------------|-----------|
| <a name="provider_github"></a> [github](#provider\_github) | >= 5.12.0 |

## Modules

| Name                                                                    | Source                                                       | Version |
|-------------------------------------------------------------------------|--------------------------------------------------------------|---------|
| <a name="module_admin_teams"></a> [admin\_teams](#module\_admin\_teams) | [team-repository](./modules/team-repository)                 | n/a     |
| <a name="module_admin_users"></a> [admin\_users](#module\_admin\_users) | [repository-collaborator](./modules/repository-collaborator) | n/a     |
| <a name="module_pull_teams"></a> [pull\_teams](#module\_pull\_teams)    | [team-repository](./modules/team-repository)                 | n/a     |
| <a name="module_pull_users"></a> [pull\_users](#module\_pull\_users)    | [repository-collaborator](./modules/repository-collaborator) | n/a     |
| <a name="module_push_teams"></a> [push\_teams](#module\_push\_teams)    | [team-repository](./modules/team-repository)                 | n/a     |
| <a name="module_push_users"></a> [push\_users](#module\_push\_users)    | [repository-collaborator](./modules/repository-collaborator) | n/a     |

## Resources

| Name                                                                                                                              | Type     |
|-----------------------------------------------------------------------------------------------------------------------------------|----------|
| [github_branch_default.default](https://registry.terraform.io/providers/integrations/github/latest/docs/resources/branch_default) | resource |
| [github_issue_label.labels](https://registry.terraform.io/providers/integrations/github/latest/docs/resources/issue_label)        | resource |
| [github_repository.repo](https://registry.terraform.io/providers/integrations/github/latest/docs/resources/repository)            | resource |

## Inputs

| Name                                                                                                                                                            | Description                                                                                                                                                                                | Type                                                                                                                   | Default                | Required |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|------------------------|:--------:|
| <a name="input_admin_teams"></a> [admin\_teams](#input\_admin\_teams)                                                                                           | A set of team IDs allowed to administer this repository.                                                                                                                                   | `set(string)`                                                                                                          | `[]`                   |    no    |
| <a name="input_admin_users"></a> [admin\_users](#input\_admin\_users)                                                                                           | A set of GitHub users' IDs allowed to admin this repository.                                                                                                                               | `set(string)`                                                                                                          | `[]`                   |    no    |
| <a name="input_advanced_security_enabled"></a> [advanced\_security\_enabled](#input\_advanced\_security\_enabled)                                               | Whether or not advanced security features are enabled on the repository.                                                                                                                   | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_allow_merge_commit"></a> [allow\_merge\_commit](#input\_allow\_merge\_commit)                                                                    | Set to false to disable merge commits on the repository.                                                                                                                                   | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_allow_rebase_merge"></a> [allow\_rebase\_merge](#input\_allow\_rebase\_merge)                                                                    | Set to `false` to disable rebase merges on the repository.                                                                                                                                 | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_allow_squash_merge"></a> [allow\_squash\_merge](#input\_allow\_squash\_merge)                                                                    | Set to false to disable squash merges on the repository.                                                                                                                                   | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_allow_update_branch"></a> [allow\_update\_branch](#input\_allow\_update\_branch)                                                                 | Set to `true` to always suggest updating pull request branches.                                                                                                                            | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_archive_on_destroy"></a> [archive\_on\_destroy](#input\_archive\_on\_destroy)                                                                    | Set to `true` to archive the repository instead of deleting on destroy.                                                                                                                    | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_archived"></a> [archived](#input\_archived)                                                                                                      | Specifies if the repository should be archived.                                                                                                                                            | `bool`                                                                                                                 | `false`                |    no    |
| <a name="input_auto_init"></a> [auto\_init](#input\_auto\_init)                                                                                                 | Set to `true` to produce an initial commit in the repository. This is required in order to set the default branch on a new repository, but may be set to `false` on imported repositories. | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_default_branch"></a> [default\_branch](#input\_default\_branch)                                                                                  | The name of the default branch for the repository.                                                                                                                                         | `string`                                                                                                               | `"main"`               |    no    |
| <a name="input_delete_branch_on_merge"></a> [delete\_branch\_on\_merge](#input\_delete\_branch\_on\_merge)                                                      | Automatically delete head branch after a pull request is merged.                                                                                                                           | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_description"></a> [description](#input\_description)                                                                                             | A description of the repository.                                                                                                                                                           | `string`                                                                                                               | n/a                    |   yes    |
| <a name="input_has_downloads"></a> [has\_downloads](#input\_has\_downloads)                                                                                     | Set to `true` to enable the (deprecated) downloads features on the repository.                                                                                                             | `bool`                                                                                                                 | `false`                |    no    |
| <a name="input_has_issues"></a> [has\_issues](#input\_has\_issues)                                                                                              | Set to `true` to enable the GitHub Issues features on the repository.                                                                                                                      | `bool`                                                                                                                 | `false`                |    no    |
| <a name="input_has_projects"></a> [has\_projects](#input\_has\_projects)                                                                                        | Set to `true` to enable the GitHub Projects features on the repository.                                                                                                                    | `bool`                                                                                                                 | `false`                |    no    |
| <a name="input_has_wiki"></a> [has\_wiki](#input\_has\_wiki)                                                                                                    | Set to `true` to enable the GitHub Wiki features on the repository.                                                                                                                        | `bool`                                                                                                                 | `false`                |    no    |
| <a name="input_homepage_url"></a> [homepage\_url](#input\_homepage\_url)                                                                                        | URL of a page describing the project.                                                                                                                                                      | `string`                                                                                                               | `""`                   |    no    |
| <a name="input_ignore_vulnerability_alerts_during_read"></a> [ignore\_vulnerability\_alerts\_during\_read](#input\_ignore\_vulnerability\_alerts\_during\_read) | Set to `true` to omit calling the vulnerability alerts endpoint so the resource can also be used without admin permissions during read.                                                    | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_is_template"></a> [is\_template](#input\_is\_template)                                                                                           | Whether or not this repository is a template repository.                                                                                                                                   | `bool`                                                                                                                 | `false`                |    no    |
| <a name="input_labels"></a> [labels](#input\_labels)                                                                                                            | A set of labels to configure for the repository.                                                                                                                                           | <pre>set(object({<br>    name        = string,<br>    description = string,<br>    color       = string<br>  }))</pre> | `[]`                   |    no    |
| <a name="input_merge_commit_message"></a> [merge\_commit\_message](#input\_merge\_commit\_message)                                                              | The default merge commit message. One of `PR_BODY`, `PR_TITLE`, or `BLANK`.                                                                                                                | `string`                                                                                                               | `"PR_TITLE"`           |    no    |
| <a name="input_merge_commit_title"></a> [merge\_commit\_title](#input\_merge\_commit\_title)                                                                    | The default merge commit title. One of `PR_TITLE` or `MERGE_MESSAGE`.                                                                                                                      | `string`                                                                                                               | `"PR_TITLE"`           |    no    |
| <a name="input_name"></a> [name](#input\_name)                                                                                                                  | The name of the repository.                                                                                                                                                                | `string`                                                                                                               | n/a                    |   yes    |
| <a name="input_pages_branch"></a> [pages\_branch](#input\_pages\_branch)                                                                                        | The repository branch used to publish the site's source files.                                                                                                                             | `string`                                                                                                               | `null`                 |    no    |
| <a name="input_pages_cname"></a> [pages\_cname](#input\_pages\_cname)                                                                                           | The custom domain for the repository. This can only be set after the repository has been created.                                                                                          | `string`                                                                                                               | `null`                 |    no    |
| <a name="input_pages_path"></a> [pages\_path](#input\_pages\_path)                                                                                              | The path from which the site publishes GitHub pages.                                                                                                                                       | `string`                                                                                                               | `null`                 |    no    |
| <a name="input_pull_users"></a> [pull\_users](#input\_pull\_users)                                                                                              | A set of GitHub users' IDs allowed to read this repository.                                                                                                                                | `set(string)`                                                                                                          | `[]`                   |    no    |
| <a name="input_push_users"></a> [push\_users](#input\_push\_users)                                                                                              | A set of GitHub users' IDs allowed to write to this repository.                                                                                                                            | `set(string)`                                                                                                          | `[]`                   |    no    |
| <a name="input_read_teams"></a> [read\_teams](#input\_read\_teams)                                                                                              | A set of teams allowed to pull this repository.                                                                                                                                            | `set(string)`                                                                                                          | `[]`                   |    no    |
| <a name="input_secret_scanning_enabled"></a> [secret\_scanning\_enabled](#input\_secret\_scanning\_enabled)                                                     | Whether or not secret scanning is enabled on the repository.                                                                                                                               | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_secret_scanning_push_protection_enabled"></a> [secret\_scanning\_push\_protection\_enabled](#input\_secret\_scanning\_push\_protection\_enabled) | Whether or not secret scanning push protection is enabled on the repository.                                                                                                               | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_squash_merge_commit_message"></a> [squash\_merge\_commit\_message](#input\_squash\_merge\_commit\_message)                                       | The default squash merge commit message. One of `PR_BODY`, `COMMIT_MESSAGES`, or `BLANK`.                                                                                                  | `string`                                                                                                               | `"COMMIT_MESSAGES"`    |    no    |
| <a name="input_squash_merge_commit_title"></a> [squash\_merge\_commit\_title](#input\_squash\_merge\_commit\_title)                                             | The default squash merge commit title. One of `PR_TITLE` or `COMMIT_OR_PR_TITLE`.                                                                                                          | `string`                                                                                                               | `"COMMIT_OR_PR_TITLE"` |    no    |
| <a name="input_template_owner"></a> [template\_owner](#input\_template\_owner)                                                                                  | The owner of the template repository.                                                                                                                                                      | `string`                                                                                                               | `null`                 |    no    |
| <a name="input_template_repository"></a> [template\_repository](#input\_template\_repository)                                                                   | The name of the template repository.                                                                                                                                                       | `string`                                                                                                               | `null`                 |    no    |
| <a name="input_topics"></a> [topics](#input\_topics)                                                                                                            | A list of topics for the repository.                                                                                                                                                       | `set(string)`                                                                                                          | `[]`                   |    no    |
| <a name="input_visibility"></a> [visibility](#input\_visibility)                                                                                                | Determines the visibility of the repository. One of `private`, `public`, or `internal`. Note that `internal` is only available for GitHub Enterprise tiers.                                | `string`                                                                                                               | `"private"`            |    no    |
| <a name="input_vulnerability_alerts"></a> [vulnerability\_alerts](#input\_vulnerability\_alerts)                                                                | Whether or not security alerts for vulnerable dependencies are enabled on the repository.                                                                                                  | `bool`                                                                                                                 | `true`                 |    no    |
| <a name="input_write_teams"></a> [write\_teams](#input\_write\_teams)                                                                                           | A set of team IDs allowed to push to this repository.                                                                                                                                      | `set(string)`                                                                                                          | `[]`                   |    no    |

## Outputs

| Name                                                                               | Description                                                                                                            |
|------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| <a name="output_full_name"></a> [full\_name](#output\_full\_name)                  | The full name of the repository in the form `org-name/repo-name`.                                                      |
| <a name="output_git_clone_url"></a> [git\_clone\_url](#output\_git\_clone\_url)    | The URL that can be provided to `git clone` to clone the repository anonymously via the git protocol.                  |
| <a name="output_http_clone_url"></a> [http\_clone\_url](#output\_http\_clone\_url) | The URL that can be provided to `git clone` to clone the repository via HTTPS.                                         |
| <a name="output_id"></a> [id](#output\_id)                                         | The ID of the repository.                                                                                              |
| <a name="output_node_id"></a> [node\_id](#output\_node\_id)                        | The Node ID of the repository.                                                                                         |
| <a name="output_ssh_clone_url"></a> [ssh\_clone\_url](#output\_ssh\_clone\_url)    | The URL that can be provided to `git clone` to clone the repository via SSH.                                           |
| <a name="output_svn_url"></a> [svn\_url](#output\_svn\_url)                        | The URL that can be provided to `svn checkout` to check out the repository via GitHub's Subversion protocol emulation. |

[ci_badge_image]:https://img.shields.io/github/actions/workflow/status/cncsc/terraform-github-repository/ci.yaml?branch=main&label=ci&logo=github
[ci_badge_link]:https://github.com/cncsc/terraform-github-repository/actions/workflows/ci.yaml
[cd_badge_image]:https://img.shields.io/github/actions/workflow/status/cncsc/terraform-github-repository/cd.yaml?branch=main&label=cd&logo=github
[cd_badge_link]:https://github.com/cncsc/terraform-github-repository/actions/workflows/cd.yaml
[release_badge_image]:https://img.shields.io/github/v/release/cncsc/terraform-github-repository?logo=terraform
[release_badge_link]:https://registry.terraform.io/modules/cncsc/repository/github/latest
[license_badge_image]:https://img.shields.io/github/license/cncsc/terraform-github-repository
[license_badge_link]:./LICENSE
[maintainer_badge_image]:https://img.shields.io/badge/maintainer-Armor-f60
[maintainer_badge_link]:https://www.armor.com/?utm_source=github&utm_medium=organic_oss&utm_campaign=terraform-github-repository
